---
nav: Browser
group: 浏览器
---

# 浏览器缓存机制(强缓存,协商缓存区别)

浏览器第一次加载资源，服务器返回 200状态码，浏览器从服务器下载资源文件，并缓存资源文件与 response header，以供下次加载时对比使用

下一次加载资源时，由于**强制缓存**优先级较高，先比较当前时间与上一次返回 200 状态码时的时间差，如果没有超过 cache-control 设置的 max-age. 则命中强缓存，直接从本地读取资源。

如果资源已过期，则表明强制缓存没有被命中，则开始**协商缓存**，向服务器发送带有 lf-None-Match 和fModified-Since 的请求

服务器收到请求后，优先根据 Etag 的值判断被请求的文件有没有做修改，Etag 值一致则没有修改，命中协商缓存，返回 304状态码. 如果不一致则有改动，直接返回新的资源文件带上新的 Etag 值并返回 200状态码

如果服务器收到的请求没有 Etag 值，则将 f-Modified-Since 和被请求文件的最后修改时间做比对，一致则命中协商缓存，返回 304状态码. 不一致则返回新的 last-modified 和文件并返回 200状态码
